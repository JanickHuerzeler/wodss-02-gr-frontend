(this["webpackJsonpcorona-navigator"]=this["webpackJsonpcorona-navigator"]||[]).push([[0],{1464:function(e,t,n){},1467:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n.n(a),o=n(66),r=n.n(o),s=(n(634),n(635),n(35)),c=n(45),l=n(54),d=n(55),u=(n(636),n(20)),p=n.n(u),h=n(14),v=n(50),g=(n(638),n(232)),b=(n(639),n(3)),m=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.intl;return t.show&&Object(b.jsxs)("div",{className:"infoBubble",children:[Object(b.jsxs)("span",{className:"infoBubble--municipality",children:[t.zip," ",t.name]}),Object(b.jsxs)("span",{className:"infoBubble--incidence",children:[n.formatMessage({id:"incidence"}),":",Object(b.jsx)("span",{children:t.incidence||0===t.incidence?t.incidence.toFixed(1):"?"})]})]})}}]),n}(a.Component),f=Object(g.c)(m),j=function(e,t){return e&&t?e.lat===t.lat&&e.lng===t.lng:!e&&!t},O=function(e){e&&e.setMap(null)},M=function(e){e.forEach((function(e){return e.setMap(null)}))},y=n(111),x=n.n(y),S=n(622),C=n(623),I="http://localhost".replace(/\/+$/,""),N=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.a;Object(s.a)(this,e),this.basePath=n,this.axios=a,this.configuration=void 0,t&&(this.configuration=t,this.basePath=t.basePath||this.basePath)},w=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e,a){var i;return Object(s.a)(this,n),(i=t.call(this,a)).field=e,i.name="RequiredError",i}return n}(Object(C.a)(Error)),A="https://example.com",k=function(e,t,n){if(null===n||void 0===n)throw new w(t,"Required parameter ".concat(t," was null or undefined when calling ").concat(e,"."))},T=function(e){for(var t=new URLSearchParams(e.search),n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];for(var o=0,r=a;o<r.length;o++){var s=r[o];for(var c in s)if(Array.isArray(s[c])){t.delete(c);var l,d=Object(S.a)(s[c]);try{for(d.s();!(l=d.n()).done;){var u=l.value;t.append(c,u)}}catch(p){d.e(p)}finally{d.f()}}else t.set(c,s[c])}e.search=t.toString()},R=function(e,t,n){var a="string"!==typeof e;return(a&&n&&n.isJsonMime?n.isJsonMime(t.headers["Content-Type"]):a)?JSON.stringify(void 0!==e?e:{}):e||""},B=function(e){return e.pathname+e.search+e.hash},G=function(e,t,n,a){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=Object(h.a)(Object(h.a)({},e.options),{},{url:((null===a||void 0===a?void 0:a.basePath)||o)+e.url});return i.request(r)}},D=function(e){var t=function(e){return{cantonsCantonIncidencesGet:function(){var t=Object(v.a)(p.a.mark((function t(n,a,i,o){var r,s,c,l,d,u,v,g,b=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=b.length>4&&void 0!==b[4]?b[4]:{},k("cantonsCantonIncidencesGet","canton",n),s="/cantons/{canton}/incidences/".replace("{".concat("canton","}"),encodeURIComponent(String(n))),c=new URL(s,A),e&&(l=e.baseOptions),d=Object(h.a)(Object(h.a)({method:"GET"},l),r),u={},v={},void 0!==a&&(v.dateFrom=a),void 0!==i&&(v.dateTo=i),void 0!==o&&(v.language=o),T(c,v,r.query),g=l&&l.headers?l.headers:{},d.headers=Object(h.a)(Object(h.a)(Object(h.a)({},u),g),r.headers),t.abrupt("return",{url:B(c),options:d});case 15:case"end":return t.stop()}}),t)})));return function(e,n,a,i){return t.apply(this,arguments)}}(),cantonsCantonMunicipalitiesBfsNrGet:function(){var t=Object(v.a)(p.a.mark((function t(n,a,i){var o,r,s,c,l,d,u,v,g=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=g.length>3&&void 0!==g[3]?g[3]:{},k("cantonsCantonMunicipalitiesBfsNrGet","canton",n),k("cantonsCantonMunicipalitiesBfsNrGet","bfsNr",a),r="/cantons/{canton}/municipalities/{bfsNr}/".replace("{".concat("canton","}"),encodeURIComponent(String(n))).replace("{".concat("bfsNr","}"),encodeURIComponent(String(a))),s=new URL(r,A),e&&(c=e.baseOptions),l=Object(h.a)(Object(h.a)({method:"GET"},c),o),d={},u={},void 0!==i&&(u.language=i),T(s,u,o.query),v=c&&c.headers?c.headers:{},l.headers=Object(h.a)(Object(h.a)(Object(h.a)({},d),v),o.headers),t.abrupt("return",{url:B(s),options:l});case 14:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),cantonsCantonMunicipalitiesBfsNrIncidencesGet:function(){var t=Object(v.a)(p.a.mark((function t(n,a,i,o,r){var s,c,l,d,u,v,g,b,m=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=m.length>5&&void 0!==m[5]?m[5]:{},k("cantonsCantonMunicipalitiesBfsNrIncidencesGet","canton",n),k("cantonsCantonMunicipalitiesBfsNrIncidencesGet","bfsNr",a),c="/cantons/{canton}/municipalities/{bfsNr}/incidences/".replace("{".concat("canton","}"),encodeURIComponent(String(n))).replace("{".concat("bfsNr","}"),encodeURIComponent(String(a))),l=new URL(c,A),e&&(d=e.baseOptions),u=Object(h.a)(Object(h.a)({method:"GET"},d),s),v={},g={},void 0!==i&&(g.dateFrom=i),void 0!==o&&(g.dateTo=o),void 0!==r&&(g.language=r),T(l,g,s.query),b=d&&d.headers?d.headers:{},u.headers=Object(h.a)(Object(h.a)(Object(h.a)({},v),b),s.headers),t.abrupt("return",{url:B(l),options:u});case 16:case"end":return t.stop()}}),t)})));return function(e,n,a,i,o){return t.apply(this,arguments)}}(),cantonsCantonMunicipalitiesGet:function(){var t=Object(v.a)(p.a.mark((function t(n,a){var i,o,r,s,c,l,d,u,v=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=v.length>2&&void 0!==v[2]?v[2]:{},k("cantonsCantonMunicipalitiesGet","canton",n),o="/cantons/{canton}/municipalities/".replace("{".concat("canton","}"),encodeURIComponent(String(n))),r=new URL(o,A),e&&(s=e.baseOptions),c=Object(h.a)(Object(h.a)({method:"GET"},s),i),l={},d={},void 0!==a&&(d.language=a),T(r,d,i.query),u=s&&s.headers?s.headers:{},c.headers=Object(h.a)(Object(h.a)(Object(h.a)({},l),u),i.headers),t.abrupt("return",{url:B(r),options:c});case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),waypointsPost:function(){var t=Object(v.a)(p.a.mark((function t(n,a){var i,o,r,s,c,l,d,u=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]?u[2]:{},o=new URL("/waypoints/",A),e&&(r=e.baseOptions),s=Object(h.a)(Object(h.a)({method:"POST"},r),i),c={},l={},void 0!==n&&(l.language=n),c["Content-Type"]="application/json",T(o,l,i.query),d=r&&r.headers?r.headers:{},s.headers=Object(h.a)(Object(h.a)(Object(h.a)({},c),d),i.headers),s.data=R(a,s,e),t.abrupt("return",{url:B(o),options:s});case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}(e);return{cantonsCantonIncidencesGet:function(n,a,i,o,r){return Object(v.a)(p.a.mark((function s(){var c;return p.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.cantonsCantonIncidencesGet(n,a,i,o,r);case 2:return c=s.sent,s.abrupt("return",G(c,x.a,I,e));case 4:case"end":return s.stop()}}),s)})))()},cantonsCantonMunicipalitiesBfsNrGet:function(n,a,i,o){return Object(v.a)(p.a.mark((function r(){var s;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.cantonsCantonMunicipalitiesBfsNrGet(n,a,i,o);case 2:return s=r.sent,r.abrupt("return",G(s,x.a,I,e));case 4:case"end":return r.stop()}}),r)})))()},cantonsCantonMunicipalitiesBfsNrIncidencesGet:function(n,a,i,o,r,s){return Object(v.a)(p.a.mark((function c(){var l;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t.cantonsCantonMunicipalitiesBfsNrIncidencesGet(n,a,i,o,r,s);case 2:return l=c.sent,c.abrupt("return",G(l,x.a,I,e));case 4:case"end":return c.stop()}}),c)})))()},cantonsCantonMunicipalitiesGet:function(n,a,i){return Object(v.a)(p.a.mark((function o(){var r;return p.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.cantonsCantonMunicipalitiesGet(n,a,i);case 2:return r=o.sent,o.abrupt("return",G(r,x.a,I,e));case 4:case"end":return o.stop()}}),o)})))()},waypointsPost:function(n,a,i){return Object(v.a)(p.a.mark((function o(){var r;return p.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.waypointsPost(n,a,i);case 2:return r=o.sent,o.abrupt("return",G(r,x.a,I,e));case 4:case"end":return o.stop()}}),o)})))()}}},F=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"cantonsCantonIncidencesGet",value:function(e,t,n,a,i){var o=this;return D(this.configuration).cantonsCantonIncidencesGet(e,t,n,a,i).then((function(e){return e(o.axios,o.basePath)}))}},{key:"cantonsCantonMunicipalitiesBfsNrGet",value:function(e,t,n,a){var i=this;return D(this.configuration).cantonsCantonMunicipalitiesBfsNrGet(e,t,n,a).then((function(e){return e(i.axios,i.basePath)}))}},{key:"cantonsCantonMunicipalitiesBfsNrIncidencesGet",value:function(e,t,n,a,i,o){var r=this;return D(this.configuration).cantonsCantonMunicipalitiesBfsNrIncidencesGet(e,t,n,a,i,o).then((function(e){return e(r.axios,r.basePath)}))}},{key:"cantonsCantonMunicipalitiesGet",value:function(e,t,n){var a=this;return D(this.configuration).cantonsCantonMunicipalitiesGet(e,t,n).then((function(e){return e(a.axios,a.basePath)}))}},{key:"waypointsPost",value:function(e,t,n){var a=this;return D(this.configuration).waypointsPost(e,t,n).then((function(e){return e(a.axios,a.basePath)}))}}]),n}(N),L=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),this.apiKey=void 0,this.username=void 0,this.password=void 0,this.accessToken=void 0,this.basePath=void 0,this.baseOptions=void 0,this.formDataCtor=void 0,this.apiKey=t.apiKey,this.username=t.username,this.password=t.password,this.accessToken=t.accessToken,this.basePath=t.basePath,this.baseOptions=t.baseOptions,this.formDataCtor=t.formDataCtor}return Object(c.a)(e,[{key:"isJsonMime",value:function(e){var t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}}]),e}(),z=n(1477),W=n(1478),E=n(624),P=n(350),Y=(n(668),new F(new L({basePath:"http://localhost:5001"}))),Z={lat:Number.parseFloat("47.48107"),lng:Number.parseFloat("8.21162")},V=function(){return{styles:[{stylers:[{saturation:-99},{gamma:.8},{lightness:5}]}]}},J={strokeOpacity:.5,fillOpacity:.3},X={strokeOpacity:.95,fillOpacity:.6},U=Number.parseInt("20"),H=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).directionsService=void 0,a.directionsRenderer=void 0,a.mapPolygons=void 0,a.locationMarker=void 0,a.locationFromBefore=void 0,a.locationToBefore=void 0,a.locationStopOversBefore=void 0,a.travelModeBefore=void 0,a.state={defaultCenter:Z,center:Z,defaultZoom:12,map:null,mapLoaded:!1,isLoading:!1,loaded:!1,uniqueId:0,infoBubble:{show:!1,lat:"",lng:"",name:"",zip:0,incidence:0},timeoutCantons:[],noServerResponse:!1,chunkSize:0},a.handleMap=function(){if(a.directionsRenderer.setMap(a.state.map),a.props.locationFrom&&a.props.locationTo){var e=Date.now();a.setState({uniqueId:e});var t=a.props.locationStopOvers&&a.props.locationStopOvers.length>0?a.props.locationStopOvers.filter((function(e){return e.lat&&e.lng})).map((function(e){return{location:e,stopover:!0}})):void 0;M(a.mapPolygons),O(a.locationMarker);var n={origin:a.props.locationFrom,destination:a.props.locationTo,travelMode:a.props.travelMode};a.props.travelMode!==google.maps.TravelMode.TRANSIT&&(n.waypoints=t),a.directionsService.route(n,function(){var t=Object(v.a)(p.a.mark((function t(n,i){var o,r,s,c,l,d,u;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&i===google.maps.DirectionsStatus.OK){for(o=a.computeRouteInfos(n),r=[],s=[],c=[],a.setState({isLoading:!0}),a.directionsRenderer.setDirections(n),a.props.routeChanged(o),a.props.travelMode===google.maps.TravelMode.TRANSIT?n.routes[0].legs.forEach((function(e){e.steps.forEach((function(e){a.pushWaypoint(r,e.start_location),a.pushWaypoint(r,e.end_location)}))})):n.routes[0].overview_path.forEach((function(e){a.pushWaypoint(r,e)})),l=Math.ceil(r.length/Math.ceil(o.distance/U)),d=0,u=r.length;d<u;d+=l)s.push(r.slice(d,d+l));0===s.length&&a.municipalitiesLoaded(),a.setState({timeoutCantons:[]}),a.setState({noServerResponse:!1}),a.setState({chunkSize:s.length}),s.forEach((function(t,n){a.sendWaypointsToBackend(t,(function(t){t&&t.length>0&&a.state.uniqueId===e&&(t.forEach((function(e){if(a.insertMunicipalityToRouteInfo(e,o,n),!c.includes(e.name))if(c.push(e.name),e.geo_shapes){var t=new google.maps.LatLngBounds;e.geo_shapes.forEach((function(n){var i=new google.maps.Polygon(Object(h.a)({paths:n.map((function(e){var n={lat:e.lat||0,lng:e.lng||0};return t.extend(n),n})),strokeWeight:2,strokeColor:e.incidence_color,fillColor:e.incidence_color,map:a.state.map},J));i.addListener("mouseover",(function(){i.setOptions(X),a.setState({infoBubble:{show:!0,lat:t.getCenter().lat().toString(),lng:t.getCenter().lng().toString(),name:e.name,zip:e.plz,incidence:e.incidence}})})),i.addListener("mouseout",(function(){i.setOptions(J),a.setState({infoBubble:Object(h.a)(Object(h.a)({},a.state.infoBubble),{},{show:!1})})})),i.addListener("click",(function(){i.setOptions(J),a.props.selectedMunicipalityChanged(e)})),a.mapPolygons.push(i)})),a.computeRouteIncidenceRollingAVG(o,e.incidence),a.props.routeChanged(o)}else console.warn("ERROR: no geo_shapes found")})),n+1===s.length&&a.municipalitiesLoaded())}))}))}else console.error("error fetching directions ".concat(n));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}else{a.props.routeChanged({distance:0,duration:0,incidence:null,municipalities:[]}),a.directionsRenderer.setMap(null),O(a.locationMarker),M(a.mapPolygons);var i=a.props.locationFrom||a.props.locationTo;i&&(a.locationMarker=new google.maps.Marker({position:i,map:a.state.map}),a.state.center!==i&&setTimeout((function(){return a.setState({center:i})}),0))}},a.directionsService=new google.maps.DirectionsService,a.directionsRenderer=new google.maps.DirectionsRenderer,a.mapPolygons=[],a.locationMarker=void 0,a.locationFromBefore=a.props.locationFrom,a.locationToBefore=a.props.locationTo,a.locationStopOversBefore=a.props.locationStopOvers,a.travelModeBefore=a.props.travelMode,a}return Object(c.a)(n,[{key:"sendWaypointsToBackend",value:function(e,t){var n=this;Y.waypointsPost(this.props.selectedLocale,e).then((function(e){if(t(e.data),e.headers&&e.headers["x-cantons-timeout"]){var a=e.headers["x-cantons-timeout"].toString().replace("{","").replace("}","").replaceAll("'","").split(", ").filter((function(e,t,n){return n.indexOf(e)===t}));(a=a.filter((function(e){return-1===n.state.timeoutCantons.indexOf(e)}))).length>0&&(n.setState((function(e,t){return{timeoutCantons:a.concat(e.timeoutCantons)}})),n.showToast(n.props.intl.formatMessage({id:"errorMessageTimeout"})+a.join(", ")))}}),(function(e){n.handleApiError(e)})).finally((function(){n.setState((function(e,t){return{chunkSize:e.chunkSize-1}}),(function(){0===n.state.chunkSize&&n.setState({isLoading:!1})}))}))}},{key:"handleApiError",value:function(e){var t="An error happened.";if(e.response)console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers),t=this.props.intl.formatMessage({id:"errorMessageHttpError"})+e.response.status;else if(e.request){if(this.state.noServerResponse)return;this.setState((function(e,t){return{noServerResponse:!0}})),console.log(e.request),t=this.props.intl.formatMessage({id:"errorMessageNoResponse"})}else console.log("Error",e.message),t=this.props.intl.formatMessage({id:"errorMessageRequestError"})+e.message;console.log(e),this.showToast(t)}},{key:"showToast",value:function(e){Object(P.b)(Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{className:"errorTitle",children:this.props.intl.formatMessage({id:"errorEmoji"})+" "+this.props.intl.formatMessage({id:"error"})}),Object(b.jsx)("br",{}),e]}),{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,type:"dark"})}},{key:"insertMunicipalityToRouteInfo",value:function(e,t,n){var a,i=!0;for(a=0;a<t.municipalities.length;a++)if(t.municipalities[a].municipality.name===e.name){t.municipalities[a].index>n?(i=!0,t.municipalities.splice(a,1)):i=!1;break}if(i){for(a=0;a<t.municipalities.length;a++){var o;if(n<t.municipalities[a].index)break;if(n<(null===(o=t.municipalities[a+1])||void 0===o?void 0:o.index)||!t.municipalities[a+1]){a++;break}}t.municipalities.splice(a,0,{municipality:e,index:n})}}},{key:"pushWaypoint",value:function(e,t){e.push({lat:parseFloat(t.lat()),lng:parseFloat(t.lng())})}},{key:"municipalitiesLoaded",value:function(){var e=this;this.setState({isLoading:!1}),this.setState({loaded:!0}),setTimeout((function(){return e.setState({loaded:!1})}),6e3)}},{key:"computeRouteInfos",value:function(e){var t=e.routes[0],n={distance:0,duration:0,incidence:null,municipalities:[]};return t&&t.legs?(t.legs.forEach((function(e){n.distance+=e.distance.value,n.duration+=e.duration.value})),n.distance/=1e3,n.duration/=60,n):n}},{key:"computeRouteIncidenceRollingAVG",value:function(e,t){var n=0,a=0;e.municipalities.forEach((function(e){(e.municipality.incidence||0===e.municipality.incidence)&&a++})),(t||0===t)&&(e.incidence||0===e.incidence?(n=(a-1)*e.incidence,n+=t,e.incidence=n/a):e.incidence=t)}},{key:"componentDidUpdate",value:function(){var e,t;j(this.locationFromBefore,this.props.locationFrom)&&j(this.locationToBefore,this.props.locationTo)&&(e=this.locationStopOversBefore,t=this.props.locationStopOvers,Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((function(e,n){return j(e,t[n])})))&&this.props.travelMode===this.travelModeBefore||(this.locationFromBefore=this.props.locationFrom,this.locationToBefore=this.props.locationTo,this.locationStopOversBefore=this.props.locationStopOvers,this.travelModeBefore=this.props.travelMode,this.state.mapLoaded&&this.handleMap())}},{key:"render",value:function(){var e=this,t=this.state,n=t.defaultCenter,a=t.defaultZoom,i=t.center,o=this.props.intl;return Object(b.jsxs)("div",{className:"gmap-wrapper",children:[Object(b.jsx)(P.a,{position:"bottom-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,className:"toast-container"}),this.state.isLoading&&Object(b.jsxs)("div",{className:"is-loading",children:[Object(b.jsx)(z.a,{className:"icon-spin"}),Object(b.jsx)("span",{children:o.formatMessage({id:"loadingIncidenceOverlay"})})]}),this.state.loaded&&Object(b.jsxs)("div",{className:"loading-finished",children:[Object(b.jsx)(W.a,{}),Object(b.jsx)("span",{children:o.formatMessage({id:"loadingFinished"})})]}),Object(b.jsx)(E.a,{bootstrapURLKeys:{key:"AIzaSyCaORgZFgOduOC08vlydCfxm5jWSmMVnV4"},defaultCenter:n,defaultZoom:a,center:i,options:V,onGoogleApiLoaded:function(t){var n=t.map;e.setState({map:n,mapLoaded:!0})},yesIWantToUseGoogleMapApiInternals:!0,children:Object(b.jsx)(f,{lat:this.state.infoBubble.lat,lng:this.state.infoBubble.lng,data:this.state.infoBubble})})]})}}]),n}(a.Component),q=Object(g.c)(H),K=n(1483),Q=n(89),_=(n(669),n(670),n(1485)),$=n(70),ee=n(1479),te=n(1484),ne=n(1480),ae=n(1481),ie=n(1482),oe=(n(671),n(234)),re=n.n(oe),se=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).inputFieldRef=void 0,a.randomKey=Date.now().toString(),a.handleChange=function(e){a.setState({address:e,latitude:null,longitude:null,errorMessage:""})},a.handleSelect=function(e){a.setState({address:e}),e&&e.length>0&&Object(oe.geocodeByAddress)(e).then((function(e){return Object(oe.getLatLng)(e[0])})).then((function(e){var t=e.lat,n=e.lng;a.setState({latitude:t,longitude:n}),a.props.onLocationChanged(t,n)})).catch((function(e){console.error("error",e)}))},a.handleCloseClick=function(){a.setState({address:"",latitude:null,longitude:null}),a.props.onLocationChanged(null,null)},a.handleError=function(e,t){console.error("Error from Google Maps API",e),a.setState({errorMessage:e},(function(){t()}))},a.handleBlur=function(){""===a.state.address&&a.handleCloseClick()},a.handleRemoveStopover=function(){"function"===typeof a.props.onRemoveSearchbar&&a.props.stopOverIndex&&a.props.onRemoveSearchbar(a.props.stopOverIndex)},a.state={address:"",errorMessage:"",latitude:null,longitude:null},a.inputFieldRef=null,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.focus&&this.inputFieldRef.focus()}},{key:"render",value:function(){var e=this,t=this.state,n=t.address,i=t.errorMessage;return Object(b.jsxs)("div",{children:[Object(b.jsx)(re.a,{onChange:this.handleChange,value:n,onSelect:this.handleSelect,onError:this.handleError,shouldFetchSuggestions:n.length>1,highlightFirstSuggestion:!0,searchOptions:{componentRestrictions:{country:"CH"}},children:function(t){var n=t.getInputProps,i=t.suggestions,o=t.getSuggestionItemProps;return Object(b.jsxs)("div",{className:"SearchBar__search-bar-container",children:[Object(b.jsxs)("div",{className:"SearchBar__search-input-container",children:[Object(b.jsx)("input",Object(h.a)(Object(h.a)({tabIndex:e.props.tabIndex,ref:function(t){e.inputFieldRef=t}},n({placeholder:e.props.placeholder,className:"SearchBar__search-input"})),{},{onBlur:e.handleBlur})),e.state.address.length>0&&Object(b.jsx)("button",{className:"SearchBar__clear-button",onClick:e.handleCloseClick,children:"x"})]}),i.length>0&&Object(b.jsxs)("div",{className:"SearchBar__autocomplete-container",children:[i.map((function(e,t){var n="SearchBar__suggestion-item";return e.active&&(n+=" SearchBar__suggestion-item--active"),Object(a.createElement)("div",Object(h.a)(Object(h.a)({},o(e,{className:n})),{},{key:t}),Object(b.jsx)("strong",{children:e.formattedSuggestion.mainText})," ",Object(b.jsx)("small",{children:e.formattedSuggestion.secondaryText}))})),Object(b.jsx)("div",{className:"SearchBar__dropdown-footer",children:Object(b.jsx)("div",{})})]})]})}}),i.length>0&&Object(b.jsx)("div",{className:"SearchBar__error-message",children:this.state.errorMessage})]},this.randomKey)}}]),n}(i.a.Component);se.defaultProps={focus:!1,tabIndex:1};var ce=se,le=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={stopOvers:[],travelMode:"DRIVING",routeListMaxHeight:300},e.changeTravelMode=function(t){var n=t.target.id;e.setState({travelMode:n}),e.props.travelModeChanged(google.maps.TravelMode[n])},e.handleStopOverChanged=function(t,n,a){var i=t&&n?{lat:t,lng:n}:void 0,o=e.state.stopOvers;o[a]=i||{lat:void 0,lng:void 0},e.setState((function(e,t){return{stopOvers:o}}),(function(){e.props.locationStopOversChanged(e.state.stopOvers)}))},e.handleAddSearchbar=function(){var t=e.state.stopOvers?e.state.stopOvers:[];t.push({lat:void 0,lng:void 0}),e.setState((function(e,n){return{stopOvers:t}}))},e.handleRemoveSearchbar=function(t){var n=e.state.stopOvers;n.length>1?n.splice(t,1):n=[],e.setState((function(e,t){return{stopOvers:n}}),(function(){e.props.locationStopOversChanged(e.state.stopOvers)}))},e.handleRouteInfoMunicipalityClick=function(t){e.props.selectedMunicipalityChanged(t)},e}return Object(c.a)(n,[{key:"render",value:function(){var e,t,n,a,i,o,r=this,s=this.props.intl;return Object(b.jsxs)($.c,{rtl:this.props.rtl,collapsed:this.props.collapsed,toggled:this.props.toggled,breakPoint:"md",onToggle:this.props.handleToggleSidebar,"data-testid":"sidebar-1",children:[Object(b.jsx)($.f,{id:"sidebarHeaderWrapper",children:Object(b.jsxs)("div",{className:"sidebar-header",children:[Object(b.jsx)("img",{className:"sidebar-header-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAqCAYAAAD1T9h6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGOGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTA0LTI1VDAzOjQ2KzAyOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wNC0yNVQwMzo1NDoyMCswMjowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wNC0yNVQwMzo1NDoyMCswMjowMCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjRhODk4NDhkLTRlNWQtZTU0OC04YmRkLTU4ZmU1MDg2NzMyNCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpiMmZjNWFjOS01OTIwLWU5NDItODFlOS1jMzQ0MWVkYjc5OGQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmE1Y2Q4NTVmLWU2NzUtMjg0MC04NTRkLTVmYjk0NmFiODhkNiIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQzMmJkODg2LWE3MGEtN2Y0YS1iNTI1LTI5NTZlMzEzMjgzYiIgc3RFdnQ6d2hlbj0iMjAyMS0wNC0yNVQwMzo0NiswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjMgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmIyZmM1YWM5LTU5MjAtZTk0Mi04MWU5LWMzNDQxZWRiNzk4ZCIgc3RFdnQ6d2hlbj0iMjAyMS0wNC0yNVQwMzo1NDoyMCswMjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjMgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PigIbtYAAAizSURBVFjDvZl7kNZVGcc/zzm/97K7oAsiclHARUCRJGUUyhFBTcFLlpeKXC1tHLJpvFU65UxmZZmlNoVOaRiU5aWblTViKjop42VUUCRENJfbAinKsrss+zvnPP2x54WXd3/vssuCz8w777y/3zm/9/me5/Z9np9MmXYy+1NEhAkTxnHdtVcy6eiJ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",alt:"Corona Navigator GR"}),s.formatMessage({id:"sideBarTitle"})]})}),Object(b.jsxs)($.d,{children:[Object(b.jsx)($.a,{className:"travelModeMenu",id:"sidebarModeWrapper",children:Object(b.jsx)("div",{className:"travelMode",children:Object(b.jsxs)(ee.a,{"aria-label":"Basic example",children:[Object(b.jsx)(te.a,{title:s.formatMessage({id:"tavelModeDriving"}),tabIndex:1,className:"DRIVING"===this.state.travelMode?"active":"",id:"DRIVING",variant:"secondary",onClick:this.changeTravelMode,children:Object(b.jsx)(Q.c,{})}),Object(b.jsx)(te.a,{title:s.formatMessage({id:"tavelModeTransit"}),tabIndex:2,className:"TRANSIT"===this.state.travelMode?"active":"",id:"TRANSIT",variant:"secondary",onClick:this.changeTravelMode,children:Object(b.jsx)(Q.g,{})}),Object(b.jsx)(te.a,{title:s.formatMessage({id:"tavelModeWalking"}),tabIndex:3,className:"WALKING"===this.state.travelMode?"active":"",id:"WALKING",variant:"secondary",onClick:this.changeTravelMode,children:Object(b.jsx)(Q.h,{})}),Object(b.jsx)(te.a,{title:s.formatMessage({id:"tavelModeBicycling"}),tabIndex:4,className:"BICYCLING"===this.state.travelMode?"active":"",id:"BICYCLING",variant:"secondary",onClick:this.changeTravelMode,children:Object(b.jsx)(Q.b,{})})]})})},"menuTravelMode"),Object(b.jsxs)($.a,{iconShape:"circle",id:"sidebarSearchWrapper",className:"searchbar-add-stop-over-wrapper pro-menu-searchbar sidebarSearchWrapper",children:[Object(b.jsxs)($.b,{children:[Object(b.jsx)("div",{className:"search-bar-stop-over searchBarFrom",children:Object(b.jsx)("div",{className:"search-bar",children:Object(b.jsx)(ce,{tabIndex:5,placeholder:s.formatMessage({id:"destinationFrom"}),onLocationChanged:this.props.locationFromChanged,focus:!0},"searchBarFrom")})}),Object(b.jsxs)("button",{hidden:this.state.travelMode===google.maps.TravelMode.TRANSIT,className:"btn btn-purple btn-add-stopover",onClick:this.handleAddSearchbar,title:s.formatMessage({id:"addStopOver"}),children:[Object(b.jsx)(Q.f,{className:"addStopOverIcon"})," ",s.formatMessage({id:"addStopOver"})]})]},"searchBarFromMenuItem"),Object(b.jsx)($.b,{className:"searchbar-add-stop-over-wrapper pro-menu-searchbar ",children:null===(e=this.state)||void 0===e||null===(t=e.stopOvers)||void 0===t?void 0:t.map((function(e,t){var n,a;return Object(b.jsxs)("div",{hidden:r.state.travelMode===google.maps.TravelMode.TRANSIT,className:"search-bar-stop-over",children:[Object(b.jsx)("div",{className:"removeButtonWrapper removableSearchbar",children:Object(b.jsx)(ce,{tabIndex:5+((null===(n=r.state)||void 0===n||null===(a=n.stopOvers)||void 0===a?void 0:a.length)||0),placeholder:s.formatMessage({id:"stopover"}),onLocationChanged:function(e,n){r.handleStopOverChanged(e,n,t)},focus:!1})}),Object(b.jsx)("button",{className:"btn btn-purple removeStopOverButton",onClick:function(){r.handleRemoveSearchbar(t)},title:s.formatMessage({id:"removeStopOver"}),children:Object(b.jsx)(Q.e,{})})]},"searchBarStopOver"+t)}))},"searchBarAddStopover"),Object(b.jsx)($.b,{className:"pro-menu-searchbar",children:Object(b.jsx)("div",{className:"search-bar searchBarTo",children:Object(b.jsx)(ce,{tabIndex:6+((null===(n=this.state)||void 0===n||null===(a=n.stopOvers)||void 0===a?void 0:a.length)||0),placeholder:s.formatMessage({id:"destinationTo"}),onLocationChanged:this.props.locationToChanged})})},"searchBarTo"),this.props.routeInfos.distance>0&&Object(b.jsx)($.b,{children:Object(b.jsxs)("div",{className:"route-infos",children:[Object(b.jsxs)("span",{title:s.formatMessage({id:"infographicIncidence"}),children:[Object(b.jsx)("span",{className:"icon average",children:Object(b.jsx)(ne.a,{})}),(null===(i=this.props.routeInfos)||void 0===i||null===(o=i.incidence)||void 0===o?void 0:o.toFixed(1))||0]}),Object(b.jsxs)("span",{title:s.formatMessage({id:"infographicDuration"}),children:[Object(b.jsx)("span",{className:"icon",children:Object(b.jsx)(ae.a,{})}),this.props.routeInfos.duration>=60&&"".concat(Math.floor(this.props.routeInfos.duration/60)," h "),"".concat((this.props.routeInfos.duration%60).toFixed()," min")]}),Object(b.jsxs)("span",{title:s.formatMessage({id:"infographicDistance"}),children:[Object(b.jsx)("span",{className:"icon",children:Object(b.jsx)(ie.a,{})}),this.props.routeInfos.distance.toFixed(1)," km"]})]})},"routeInfos")]},"menuSearch"),this.props.routeInfos.distance>0&&Object(b.jsx)($.a,{className:"menu-waypoints",children:Object(b.jsxs)("div",{className:"route-waypoints",children:[Object(b.jsxs)("span",{className:"title",children:[Object(b.jsxs)("div",{children:[s.formatMessage({id:"municipalitiesAlongTheRoute"})," ","(",this.props.routeInfos.municipalities.length,")"]}),Object(b.jsxs)("div",{className:"waypoints-header",children:[Object(b.jsx)("span",{children:s.formatMessage({id:"ddincidenced14"})}),Object(b.jsx)("span",{children:s.formatMessage({id:"municipality"})})]})]}),Object(b.jsx)("div",{className:"listWrapper wrapper-"+this.state.stopOvers.length,children:Object(b.jsx)("ul",{children:this.props.routeInfos.municipalities.map((function(e,t){var n;return Object(b.jsxs)("li",{onClick:function(){return r.handleRouteInfoMunicipalityClick(e.municipality)},children:[Object(b.jsx)("div",{className:"bullet",style:"#000000"!==e.municipality.incidence_color?{background:"".concat(e.municipality.incidence_color)}:{background:"#6475b1"}}),Object(b.jsx)("div",{className:"incidence",children:e.municipality.incidence||0===e.municipality.incidence?null===(n=e.municipality.incidence)||void 0===n?void 0:n.toFixed(1):"?"}),Object(b.jsx)("div",{className:"info",children:e.municipality.name})]},"waypoint-".concat(t))}))})})]})},"menuWaypoint")]}),Object(b.jsxs)($.e,{className:"sidebar-footer",id:"sidebarFooterWrapper",children:[Object(b.jsxs)("div",{className:"localization-wrapper",children:[Object(b.jsx)(Q.d,{}),Object(b.jsx)("select",{className:"locales-select",onChange:function(e){return r.props.localeChanged(e.target.value)},children:Object.keys(this.props.locales).map((function(e){return Object(b.jsx)("option",{value:e,children:r.props.locales[e]},e)}))})]}),Object(b.jsx)("a",{href:"https://corona-navigator.ch",target:"_blank",className:"team-link",rel:"noopener noreferrer",children:Object(b.jsx)(_.a,{id:"sideBarFooter"})})]})]})}}]),n}(a.Component),de=Object(g.c)(le),ue={"de-DE":{area:"Fl\xe4che",coordinates:"Koordinaten",destinationFrom:"Von",destinationTo:"Nach",municipalitiesAlongTheRoute:"Gemeinden entlang der Route",incidence:"Inzidenz",ddincidenced14:"14-tages Inzidenz",municipality:"Gemeinde",municipalities:"Gemeinden",population:"Bev\xf6lkerung",sideBarTitle:"Corona Wegweiser",sideBarFooter:"Corona Navigator, Gruppe 02 Kt. Graub\xfcnden",stopover:"Zwischenhalt",addStopOver:"Zwischenhalt hinzuf\xfcgen",removeStopOver:"Zwischenhalt entfernen",loadingIncidenceOverlay:"Inzidenzen werden geladen",loadingFinished:"Inzidenzen erfolgreich geladen",infographicIncidence:"Durchschnitts-Inzidenz",infographicDuration:"Reisedauer",infographicDistance:"Distanz",tavelModeDriving:"Fahren",tavelModeTransit:"\xd6V",tavelModeWalking:"Wandern",tavelModeBicycling:"Fahrrad",errorMessageTimeout:"Verbindungsprobleme mit Kantonsservice ",errorEmoji:"\ud83d\ude37",errorMessageHttpError:"Fehler Inzidenzdienst: ",errorMessageNoResponse:"Inzidenzdienst nicht erreichbar",errorMessageRequestError:"Verbindungsaufbau fehlgeschlagen: ",error:"Ein Fehler ist aufgetreten: ",interval14:"14 Tage",interval7:"7 Tage",intervalAll:"Seit Beginn",chartTitle:"Tagesinzidenzen in ",chartXTitle:"Datum",chartYTitle:"Tagesinzidenz",chartLoading:"Laden"},"en-GB":{area:"Area",coordinates:"coordinates",destinationFrom:"From",destinationTo:"To",municipalitiesAlongTheRoute:"Municipalities along the route",incidence:"Incidence",ddincidenced14:"14d Incidence",municipality:"Municipality",municipalities:"Municipalities",population:"Population",sideBarTitle:"Corona Navigator",sideBarFooter:"Corona Navigator, Group 02 Ct. Graub\xfcnden",stopover:"Stopover",addStopOver:"Add stopover",removeStopOver:"Remove stopover",loadingIncidenceOverlay:"Incidences are loading",loadingFinished:"Incidences successfully loaded",infographicIncidence:"Mean incidence",infographicDuration:"Travel duration",infographicDistance:"Distance",tavelModeDriving:"Driving",tavelModeTransit:"Transit",tavelModeWalking:"Walking",tavelModeBicycling:"Bicycling",errorMessageTimeout:"Timeout occured for canton service ",errorEmoji:"\ud83d\ude37",errorMessageHttpError:"Error incidence service: ",errorMessageNoResponse:"Incidence service not available",errorMessageRequestError:"Request setup failed: ",error:"An error occured: ",interval14:"14 Days",interval7:"7 Days",intervalAll:"Since beginn",chartTitle:"Daily Incidences in ",chartXTitle:"Date",chartYTitle:"Daily Incidence",chartLoading:"Loading"}},pe=n(619),he=n.n(pe),ve=n(90),ge=n.n(ve),be=(n(1464),new F(new L({basePath:"http://localhost:5001"}))),me=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).intervalOptions=[{key:"interval14",date:ge()(new Date).subtract(14,"d")},{key:"interval7",date:ge()(new Date).subtract(7,"d")},{key:"intervalAll",date:ge()(new Date("2019-02-26"))}],a.state={dateFrom:ge()(new Date).subtract(15,"d"),dateTo:ge()(new Date).subtract(1,"d"),data:[],loaded:!1,selectedMunicipality:void 0,previousDateFrom:void 0},a.loadData=function(){be.cantonsCantonMunicipalitiesBfsNrIncidencesGet(a.props.selectedMunicipality.canton,a.props.selectedMunicipality.bfs_nr.toString(),ge()(a.state.dateFrom).format("YYYY-MM-DD"),ge()(a.state.dateTo).format("YYYY-MM-DD"),a.props.selectedLocale).then((function(e){var t=e.data.map((function(e){return{timestamp:new Date(e.date),value:e.incidence}}));a.setState((function(e,n){return{data:t,loaded:!0}}))}),(function(e){console.log(e.message),a.setState((function(e,t){return{loaded:!0}}))}))},a.intervalChanged=function(e){a.setState((function(t,n){return{dateFrom:ge()(new Date(e))}}))},a.renderIncidences=function(){var e,t=[{type:"bar",x:a.state.data.map((function(e){return e.timestamp})),y:a.state.data.map((function(e){return e.value})),marker:{color:"#6475b1"}}],n={title:{text:a.props.intl.formatMessage({id:"chartTitle"})+(null===(e=a.props.selectedMunicipality)||void 0===e?void 0:e.name),font:{size:20},x:.04,y:.9,xanchor:"left",yanchor:"bottom"},xaxis:{title:a.props.intl.formatMessage({id:"chartXTitle"}),margin:{t:50,b:10,l:0,r:0,pad:5},automargin:!1},autosize:!1,width:800,height:200,yaxis:{title:a.props.intl.formatMessage({id:"chartYTitle"}),automargin:!0},margin:{l:20,r:20,b:60,t:60,pad:4},paper_bgcolor:"rgba(0,0,0,0.5)",plot_bgcolor:"rgba(0,0,0,0.5)",bgcolor:"#4c5c96",bordercolor:"#4c5c96",font:{size:10,color:"#fff"}};return Object(b.jsxs)("div",{className:"incidencePlotly",children:[Object(b.jsx)(he.a,{data:t,layout:n,config:{displayModeBar:!0,modeBarButtonsToRemove:["lasso2d","toggleSpikelines"]}}),Object(b.jsx)("select",{className:"incidencechart-interval-select",onChange:function(e){return a.intervalChanged(e.target.value)},children:a.intervalOptions.map((function(e){return Object(b.jsx)("option",{value:ge()(e.date).format("YYYY-MM-DD"),children:a.props.intl.formatMessage({id:e.key})},e.key)}))}),Object(b.jsx)("div",{className:"closeIncidencePlotlyWrapper",children:Object(b.jsx)("span",{className:"closeIncidencePlotly",onClick:a.props.closeIncidenceChart,children:"X"})}),Object(b.jsx)("span",{className:"loadingIncidences",hidden:a.state.loaded,children:a.props.intl.formatMessage({id:"chartLoading"})})]})},a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(){var e=this;void 0===this.props.selectedMunicipality&&this.props.selectedMunicipality!==this.state.selectedMunicipality&&this.setState((function(t,n){return{selectedMunicipality:e.props.selectedMunicipality,dateFrom:e.intervalOptions[0].date,data:[],loaded:!1}})),!this.props.selectedMunicipality||this.props.selectedMunicipality===this.state.selectedMunicipality&&this.state.dateFrom===this.state.previousDateFrom||(this.setState((function(t,n){return{selectedMunicipality:e.props.selectedMunicipality,previousDateFrom:e.state.dateFrom,data:[],loaded:!1}})),this.loadData())}},{key:"render",value:function(){return Object(b.jsx)("div",{children:this.props.selectedMunicipality?this.renderIncidences():null})}}]),n}(a.Component),fe=Object(g.c)(me),je=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).locales={"de-DE":"Deutsch","en-GB":"English"},e.state={locationFrom:void 0,locationTo:void 0,locationStopOvers:[],travelMode:google.maps.TravelMode.DRIVING,locale:"de-DE",messages:ue,rtl:!1,toggled:!1,collapsed:!1,routeInfos:{distance:0,duration:0,incidence:null,municipalities:[]},selectedMunicipality:void 0},e.locationFromChanged=function(t,n){var a=t&&n?{lat:t,lng:n}:void 0;e.setState({locationFrom:a})},e.locationToChanged=function(t,n){var a=t&&n?{lat:t,lng:n}:void 0;e.setState({locationTo:a})},e.locationStopOversChanged=function(t){var n=t.filter((function(e){return null!==e.lat&&null!==e.lng})).map((function(e){return{lat:e.lat,lng:e.lng}}));e.setState({locationStopOvers:n})},e.localeChanged=function(t){e.setState({locale:t})},e.travelModeChanged=function(t){e.setState({travelMode:t})},e.routeChanged=function(t){e.setState({routeInfos:t})},e.handleToggleSidebar=function(t){e.setState({toggled:t})},e.handleSelectedMunicipalityChanged=function(t){e.setState((function(e,n){return{selectedMunicipality:t}}))},e.handleCloseIncidenceChart=function(){e.setState((function(e,t){return{selectedMunicipality:void 0}}))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return Object(b.jsx)(K.a,{locale:this.state.locale,messages:this.state.messages[this.state.locale],children:Object(b.jsxs)("div",{className:"App app ".concat(this.state.rtl?"rtl":""," ").concat(this.state.toggled?"toggled":""),children:[Object(b.jsx)(de,{collapsed:this.state.collapsed,rtl:this.state.rtl,toggled:this.state.toggled,handleToggleSidebar:this.handleToggleSidebar,locationFromChanged:this.locationFromChanged,locationToChanged:this.locationToChanged,locationStopOversChanged:this.locationStopOversChanged,travelModeChanged:this.travelModeChanged,locales:this.locales,localeChanged:this.localeChanged,routeInfos:this.state.routeInfos,selectedMunicipalityChanged:this.handleSelectedMunicipalityChanged}),Object(b.jsxs)("main",{children:[Object(b.jsx)("div",{className:"btn-toggle",onClick:function(){e.handleToggleSidebar(!0)},children:Object(b.jsx)(Q.a,{})}),Object(b.jsx)(q,{locationFrom:this.state.locationFrom,locationTo:this.state.locationTo,locationStopOvers:this.state.locationStopOvers,travelMode:this.state.travelMode,routeChanged:this.routeChanged,selectedLocale:this.state.locale,selectedMunicipalityChanged:this.handleSelectedMunicipalityChanged}),Object(b.jsx)(fe,{selectedLocale:this.state.locale,selectedMunicipality:this.state.selectedMunicipality,closeIncidenceChart:this.handleCloseIncidenceChart})]})]})})}}]),n}(a.Component);r.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(je,{})}),document.getElementById("root"))},634:function(e,t,n){},636:function(e,t,n){},638:function(e,t,n){},639:function(e,t,n){},670:function(e,t,n){},671:function(e,t,n){},978:function(e,t){}},[[1467,1,2]]]);
//# sourceMappingURL=main.69bcf9ed.chunk.js.map